{"ast":null,"code":"import axios from \"axios\";\nimport * as actions from \"./signupActions\";\nexport const loginUser = (email, password) => {\n  return function (dispatch) {\n    dispatch(loginUserStart());\n    const data = {\n      email,\n      password,\n      returnSecureToken: true\n    };\n    axios.post(\"https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyChBKn5Qe1tX7B43OsRAWobwKikVPyGPpg\", data).then(result => {\n      // LocalStorage ruu hadgalna\n      const token = result.data.idToken;\n      const userId = result.data.localId;\n      const expiresIn = result.data.expiresIn;\n      const expireDate = new Date(new Date().getTime() + expiresIn * 1000);\n      const refreshToken = result.data.refreshToken;\n      localStorage.setItem(\"token\", token);\n      localStorage.setItem(\"userId\", userId);\n      localStorage.setItem(\"expireDate\", expireDate);\n      localStorage.setItem(\"refreshToken\", refreshToken);\n      dispatch(loginUserSuccess(token, userId));\n      dispatch(actions.autoLogoutAfterMillisec(expiresIn * 1000));\n    }).catch(err => {\n      dispatch(loginUserError(err));\n    });\n  };\n};\nexport const loginUserStart = () => {\n  return {\n    type: \"LOGIN_USER_START\"\n  };\n};\nexport const loginUserSuccess = (token, userId) => {\n  return {\n    type: \"LOGIN_USER_SUCCESS\",\n    token,\n    userId\n  };\n};\nexport const loginUserError = error => {\n  return {\n    type: \"LOGIN_USER_ERROR\",\n    error\n  };\n};","map":{"version":3,"names":["axios","actions","loginUser","email","password","dispatch","loginUserStart","data","returnSecureToken","post","then","result","token","idToken","userId","localId","expiresIn","expireDate","Date","getTime","refreshToken","localStorage","setItem","loginUserSuccess","autoLogoutAfterMillisec","catch","err","loginUserError","type","error"],"sources":["/Users/macbookpro2020/1234.mn/ React/burger copy/src/redux/actions/loginActions.js"],"sourcesContent":["import axios from \"axios\";\r\nimport * as actions from \"./signupActions\";\r\n\r\nexport const loginUser = (email, password) => {\r\n  return function (dispatch) {\r\n    dispatch(loginUserStart());\r\n\r\n    const data = {\r\n      email,\r\n      password,\r\n      returnSecureToken: true,\r\n    };\r\n\r\n    axios\r\n      .post(\r\n        \"https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyChBKn5Qe1tX7B43OsRAWobwKikVPyGPpg\",\r\n        data\r\n      )\r\n      .then((result) => {\r\n        // LocalStorage ruu hadgalna\r\n        const token = result.data.idToken;\r\n        const userId = result.data.localId;\r\n        const expiresIn = result.data.expiresIn;\r\n        const expireDate = new Date(new Date().getTime() + expiresIn * 1000);\r\n        const refreshToken = result.data.refreshToken;\r\n\r\n        localStorage.setItem(\"token\", token);\r\n\r\n        localStorage.setItem(\"userId\", userId);\r\n        localStorage.setItem(\"expireDate\", expireDate);\r\n        localStorage.setItem(\"refreshToken\", refreshToken);\r\n\r\n        dispatch(loginUserSuccess(token, userId));\r\n        dispatch(actions.autoLogoutAfterMillisec(expiresIn * 1000));\r\n      })\r\n      .catch((err) => {\r\n        dispatch(loginUserError(err));\r\n      });\r\n  };\r\n};\r\n\r\nexport const loginUserStart = () => {\r\n  return {\r\n    type: \"LOGIN_USER_START\",\r\n  };\r\n};\r\n\r\nexport const loginUserSuccess = (token, userId) => {\r\n  return {\r\n    type: \"LOGIN_USER_SUCCESS\",\r\n    token,\r\n    userId,\r\n  };\r\n};\r\n\r\nexport const loginUserError = (error) => {\r\n  return {\r\n    type: \"LOGIN_USER_ERROR\",\r\n    error,\r\n  };\r\n};\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAO,KAAKC,OAAO,MAAM,iBAAiB;AAE1C,OAAO,MAAMC,SAAS,GAAGA,CAACC,KAAK,EAAEC,QAAQ,KAAK;EAC5C,OAAO,UAAUC,QAAQ,EAAE;IACzBA,QAAQ,CAACC,cAAc,CAAC,CAAC,CAAC;IAE1B,MAAMC,IAAI,GAAG;MACXJ,KAAK;MACLC,QAAQ;MACRI,iBAAiB,EAAE;IACrB,CAAC;IAEDR,KAAK,CACFS,IAAI,CACH,mHAAmH,EACnHF,IACF,CAAC,CACAG,IAAI,CAAEC,MAAM,IAAK;MAChB;MACA,MAAMC,KAAK,GAAGD,MAAM,CAACJ,IAAI,CAACM,OAAO;MACjC,MAAMC,MAAM,GAAGH,MAAM,CAACJ,IAAI,CAACQ,OAAO;MAClC,MAAMC,SAAS,GAAGL,MAAM,CAACJ,IAAI,CAACS,SAAS;MACvC,MAAMC,UAAU,GAAG,IAAIC,IAAI,CAAC,IAAIA,IAAI,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,GAAGH,SAAS,GAAG,IAAI,CAAC;MACpE,MAAMI,YAAY,GAAGT,MAAM,CAACJ,IAAI,CAACa,YAAY;MAE7CC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEV,KAAK,CAAC;MAEpCS,YAAY,CAACC,OAAO,CAAC,QAAQ,EAAER,MAAM,CAAC;MACtCO,YAAY,CAACC,OAAO,CAAC,YAAY,EAAEL,UAAU,CAAC;MAC9CI,YAAY,CAACC,OAAO,CAAC,cAAc,EAAEF,YAAY,CAAC;MAElDf,QAAQ,CAACkB,gBAAgB,CAACX,KAAK,EAAEE,MAAM,CAAC,CAAC;MACzCT,QAAQ,CAACJ,OAAO,CAACuB,uBAAuB,CAACR,SAAS,GAAG,IAAI,CAAC,CAAC;IAC7D,CAAC,CAAC,CACDS,KAAK,CAAEC,GAAG,IAAK;MACdrB,QAAQ,CAACsB,cAAc,CAACD,GAAG,CAAC,CAAC;IAC/B,CAAC,CAAC;EACN,CAAC;AACH,CAAC;AAED,OAAO,MAAMpB,cAAc,GAAGA,CAAA,KAAM;EAClC,OAAO;IACLsB,IAAI,EAAE;EACR,CAAC;AACH,CAAC;AAED,OAAO,MAAML,gBAAgB,GAAGA,CAACX,KAAK,EAAEE,MAAM,KAAK;EACjD,OAAO;IACLc,IAAI,EAAE,oBAAoB;IAC1BhB,KAAK;IACLE;EACF,CAAC;AACH,CAAC;AAED,OAAO,MAAMa,cAAc,GAAIE,KAAK,IAAK;EACvC,OAAO;IACLD,IAAI,EAAE,kBAAkB;IACxBC;EACF,CAAC;AACH,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}